<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="553px" preserveAspectRatio="none" style="width:1049px;height:553px;background:#FFFFFF;" version="1.1" viewBox="0 0 1049 553" width="1049px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="190.6016" style="stroke:#000000;stroke-width:1.5;" width="639.6318" x="10" y="265.0938"/><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="391.3984" width="8" x="34.9551" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="38" x2="38" y1="81.2969" y2="472.6953"/></g><g><title>Regular Web</title><rect fill="#000000" fill-opacity="0.00000" height="391.3984" width="8" x="173.2764" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="177.2173" x2="177.2173" y1="81.2969" y2="472.6953"/></g><g><title>Resource Server</title><rect fill="#000000" fill-opacity="0.00000" height="391.3984" width="8" x="435.9673" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="439.2173" x2="439.2173" y1="81.2969" y2="472.6953"/></g><g><title>IdP Provider</title><rect fill="#000000" fill-opacity="0.00000" height="391.3984" width="8" x="821.8472" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="825.3208" x2="825.3208" y1="81.2969" y2="472.6953"/></g><g class="participant participant-head" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="20" y="77.9951">User</text><ellipse cx="38.9551" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M38.9551,21.5 L38.9551,48.5 M25.9551,29.5 L51.9551,29.5 M38.9551,48.5 L25.9551,63.5 M38.9551,48.5 L51.9551,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="20" y="484.6904">User</text><ellipse cx="38.9551" cy="496.4922" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M38.9551,504.4922 L38.9551,531.4922 M25.9551,512.4922 L51.9551,512.4922 M38.9551,531.4922 L25.9551,546.4922 M38.9551,531.4922 L51.9551,546.4922 " fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="App"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104.1182" x="125.2173" y="33.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.1182" x="132.2173" y="53.6982">Regular Web</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.3506" x="163.6011" y="69.9951">App</text></g><g class="participant participant-tail" data-participant="App"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104.1182" x="125.2173" y="471.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.1182" x="132.2173" y="491.6904">Regular Web</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.3506" x="163.6011" y="507.9873">App</text></g><g class="participant participant-head" data-participant="Api"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129.5" x="375.2173" y="33.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115.5" x="382.2173" y="53.6982">Resource Server</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69.2686" x="405.333" y="69.9951">(Your API)</text></g><g class="participant participant-tail" data-participant="Api"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129.5" x="375.2173" y="471.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115.5" x="382.2173" y="491.6904">Resource Server</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69.2686" x="405.333" y="507.9873">(Your API)</text></g><g class="participant participant-head" data-participant="IdP"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="169.0527" x="741.3208" y="33.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.1025" x="783.7959" y="53.6982">IdP Provider</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="155.0527" x="748.3208" y="69.9951">(Authorization Server)</text></g><g class="participant participant-tail" data-participant="IdP"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="169.0527" x="741.3208" y="471.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.1025" x="783.7959" y="491.6904">IdP Provider</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="155.0527" x="748.3208" y="507.9873">(Authorization Server)</text></g><g class="message" data-participant-1="User" data-participant-2="App"><polygon fill="#181818" points="165.2764,108.4297,175.2764,112.4297,165.2764,116.4297,169.2764,112.4297" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="38.9551" x2="171.2764" y1="112.4297" y2="112.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.3213" x="45.9551" y="107.3638">Request resource</text></g><g class="message" data-participant-1="App" data-participant-2="Api"><polygon fill="#181818" points="427.9673,137.5625,437.9673,141.5625,427.9673,145.5625,431.9673,141.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="177.2764" x2="433.9673" y1="141.5625" y2="141.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="238.6909" x="184.2764" y="136.4966">Request resource with Access Token</text></g><g class="message" data-participant-1="Api" data-participant-2="IdP"><polygon fill="#181818" points="813.8472,166.6953,823.8472,170.6953,813.8472,174.6953,817.8472,170.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="439.9673" x2="819.8472" y1="170.6953" y2="170.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="361.8799" x="446.9673" y="165.6294">Introspect Access Token against Introspection endpoint</text></g><path d="M830,183.6953 L830,223.6953 L1042,223.6953 L1042,193.6953 L1032,183.6953 L830,183.6953 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1032,183.6953 L1032,193.6953 L1042,193.6953 L1032,183.6953 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191.9595" x="836" y="200.7622">Validate Access Token claims</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178.3374" x="836" y="215.895">(expiration, signature, etc.)</text><g class="message" data-participant-1="IdP" data-participant-2="Api"><polygon fill="#181818" points="450.9673,246.0938,440.9673,250.0938,450.9673,254.0938,446.9673,250.0938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="444.9673" x2="824.8472" y1="250.0938" y2="250.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148.9922" x="456.9673" y="245.0278">Token validation result</text></g><path d="M10,265.0938 L74.4429,265.0938 L74.4429,272.2266 L64.4429,282.2266 L10,282.2266 L10,265.0938 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="190.6016" style="stroke:#000000;stroke-width:1.5;" width="639.6318" x="10" y="265.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="25" y="278.1606">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="82.9028" x="89.4429" y="277.3042">[Token Valid]</text><g class="message" data-participant-1="Api" data-participant-2="Api"><line style="stroke:#181818;stroke-width:1;" x1="439.9673" x2="481.9673" y1="303.3594" y2="303.3594"/><line style="stroke:#181818;stroke-width:1;" x1="481.9673" x2="481.9673" y1="303.3594" y2="316.3594"/><line style="stroke:#181818;stroke-width:1;" x1="440.9673" x2="481.9673" y1="316.3594" y2="316.3594"/><polygon fill="#181818" points="450.9673,312.3594,440.9673,316.3594,450.9673,320.3594,446.9673,316.3594" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190.6646" x="446.9673" y="298.2935">Check user roles/permissions</text></g><g class="message" data-participant-1="Api" data-participant-2="App"><polygon fill="#181818" points="188.2764,341.4922,178.2764,345.4922,188.2764,349.4922,184.2764,345.4922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="182.2764" x2="438.9673" y1="345.4922" y2="345.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.7729" x="194.2764" y="340.4263">Grant access to resource</text></g><g class="message" data-participant-1="App" data-participant-2="User"><polygon fill="#181818" points="49.9551,370.625,39.9551,374.625,49.9551,378.625,45.9551,374.625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="43.9551" x2="176.2764" y1="374.625" y2="374.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60.4868" x="55.9551" y="369.5591">Resource</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="10" x2="649.6318" y1="383.625" y2="383.625"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="93.4839" x="15" y="393.8354">[Token Invalid]</text><g class="message" data-participant-1="Api" data-participant-2="App"><polygon fill="#181818" points="188.2764,414.5625,178.2764,418.5625,188.2764,422.5625,184.2764,418.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="182.2764" x2="438.9673" y1="418.5625" y2="418.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180.0894" x="194.2764" y="413.4966">Deny access (invalid token)</text></g><g class="message" data-participant-1="App" data-participant-2="User"><polygon fill="#181818" points="49.9551,443.6953,39.9551,447.6953,49.9551,451.6953,45.9551,447.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="43.9551" x2="176.2764" y1="447.6953" y2="447.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32.2017" x="55.9551" y="442.6294">Error</text></g><!--SRC=[RL79JiCm4BtxAqOzjLA1Umz84I2KMrGs8VLYd24PDRNDU1AMhyTE35MWkLZnM-RDipRY61u2ilAQXGnvRGKMMspwJZCyuSlE5julG0U8vrzMS3qRX3la0Nbdby_n7uggN6K1pGLbNK75Rg1wP1Uzj8xfImivcqqcPIGgbMB1sMMQ2nlOubkFGO3pK9MkHvHEeF1Eqa9X38O0zswFLYLYvASC6oYji0iUZSn8e1jDDleSyHGDRUqTML7M2G9Jqmgursprg3kgTRoV6PbEqo749V734uyRhY5GOxNqZ6j0CUShbHn-TvY4msINniPb-awKxYHZuoW5ySlBJCAh5iqU-bGNkmx3XKS-K0ZH8ypPgSXRJc-Xfx3YZeLEpB7KiVhKQeQm2vWpb7RudoBvNgFz_B5TqiIA_b6pEc5zm-nOnMA_0G00]--></g></svg>